<script setup lang="ts">
import html2pdf from 'html2pdf.js'
import { ref, onMounted } from 'vue'
import GridStack from '@/components/GridStack/GridStack.vue'
import svgGridJson1 from '@/tex/source/1/svgs.json'
import svgGridJson2 from '@/tex/source/2/svgs.json'

const mainMenuActive = ref(false)
const currentSvgGridJson = ref(svgGridJson1)

function toggleMainMenu() {
  mainMenuActive.value = !mainMenuActive.value
}

function handleTabClick(event: any) {
  console.log('event', event)
}

onMounted(() => {
  const element = document.getElementById('canvas')
  const opt = {
    margin: 1,
    filename: 'myfile.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    jsPDF: { unit: 'in', format: 'letter', orientation: 'landscape' }
  }

  // New Promise-based usage:
  // html2pdf().set(opt).from(element).save()
})
</script>

<template>
  <div id="canvas" class="canvas">
    <MainMenu />
    <GridStack @hide-main-menu="toggleMainMenu" json="currentSvgGridJson" />
    <svg
      width="106"
      height="29"
      viewBox="0 0 106 29"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:svg="http://www.w3.org/2000/svg"
    >
      <g fill="#000000" fill-opacity="1" stroke-width="3" id="g257">
        <g id="use255" transform="translate(102.219,0.65499997)">
          <path
            id="path767"
            d="M 2.65625,27.546875 H 0.171875 v 0.65625 H 3.3125 v -28.6875 H 0.171875 v 0.65625 H 2.65625 Z m 0,0 M -2.415503,16.32375 c 0,-0.28125 0,-0.296875 -0.234375,-0.296875 C -2.931128,16.355 -3.540503,16.7925 -4.759253,16.7925 v 0.34375 c 0.265625,0 0.859375,0 1.53125,-0.296875 v 6.21875 c 0,0.4375 -0.046875,0.578125 -1.09375,0.578125 h -0.375 V 23.98 c 0.328125,-0.03125 1.484375,-0.03125 1.875,-0.03125 0.40625,0 1.546875,0 1.875,0.03125 v -0.34375 h -0.375 c -1.046875,0 -1.09375,-0.140625 -1.09375,-0.578125 z m 0,0 M -0.493628,5.705875 c 0,-0.984375 -0.0625,-1.953125 -0.5,-2.859375 -0.484375,-1 -1.34375,-1.265625 -1.9375,-1.265625 -0.6875,0 -1.53125,0.34375 -1.984375,1.34375 -0.328125,0.75 -0.453125,1.5 -0.453125,2.78125 0,1.15625 0.09375,2.03125 0.515625,2.890625 0.46875,0.90625 1.296875,1.1875 1.921875,1.1875 1.03125,0 1.625,-0.625 1.984375,-1.3125 0.421875,-0.890625 0.453125,-2.0625 0.453125,-2.765625 z m -2.4375,3.84375 c -0.390625,0 -1.171875,-0.21875 -1.390625,-1.515625 -0.125,-0.71875 -0.125,-1.625 -0.125,-2.46875 0,-0.984375 0,-1.859375 0.1875,-2.5625 0.203125,-0.8125 0.8125,-1.171875 1.328125,-1.171875 0.453125,0 1.140625,0.265625 1.375,1.296875 0.15625,0.6875 0.15625,1.625 0.15625,2.4375 0,0.796875 0,1.703125 -0.140625,2.4375 -0.21875,1.3125 -0.984375,1.546875 -1.390625,1.546875 z m 0,0 m -6.246498,18.6535 h 3.140625 v -0.65625 h -2.484375 v -27.375 h 2.484375 v -0.65625 h -3.140625 z m 0,0 m -7.347877,-15.221126 c 0.171875,0 0.390625,0 0.390625,-0.21875 0,-0.21875 -0.203125,-0.21875 -0.390625,-0.21875 h -7.03125 c -0.171875,0 -0.390625,0 -0.390625,0.21875 0,0.21875 0.203125,0.21875 0.390625,0.21875 z m 0,2.21875 c 0.171875,0 0.390625,0 0.390625,-0.203125 0,-0.234375 -0.203125,-0.234375 -0.390625,-0.234375 h -7.03125 c -0.171875,0 -0.390625,0 -0.390625,0.21875 0,0.21875 0.203125,0.21875 0.390625,0.21875 z m 0,0 m -12.766869,-1.125 c 0.0625,-0.140625 0.0625,-0.171875 0.0625,-0.203125 0,-0.04687 0,-0.0625 -0.0625,-0.203125 l -2.09375,-5.5 c -0.07813,-0.203125 -0.140625,-0.28125 -0.28125,-0.28125 -0.125,0 -0.234375,0.109375 -0.234375,0.25 0,0.03125 0,0.046875 0.0625,0.1875 l 2.109375,5.546875 -2.109375,5.515625 c -0.0625,0.140625 -0.0625,0.15625 -0.0625,0.21875 0,0.125 0.109375,0.234375 0.234375,0.234375 0.15625,0 0.203125,-0.109375 0.25,-0.234375 z m 0,0 m -5.681129,-4.875 c 0,-0.28125 0,-0.296875 -0.234375,-0.296875 -0.28125,0.328125 -0.890625,0.765625 -2.109375,0.765625 v 0.34375 c 0.265625,0 0.859375,0 1.53125,-0.296875 v 6.21875 c 0,0.4375 -0.04687,0.578125 -1.09375,0.578125 h -0.375 v 0.34375 c 0.328125,-0.03125 1.484375,-0.03125 1.875,-0.03125 0.40625,0 1.546875,0 1.875,0.03125 v -0.34375 h -0.375 c -1.046875,0 -1.09375,-0.140625 -1.09375,-0.578125 z m 0,0 m -4.852249,-0.875 c 0,-0.21875 0,-0.4375 -0.25,-0.4375 -0.234375,0 -0.234375,0.21875 -0.234375,0.4375 v 11.09375 c 0,0.203125 0,0.421875 0.234375,0.421875 0.25,0 0.25,-0.21875 0.25,-0.421875 z m 0,0 m -19.258,19.221126 h -2.484375 v 0.65625 h 3.140625 v -28.6875 h -3.140625 v 0.65625 h 2.484375 z m 0,0 m -3.149876,-7.395 c 0,-0.984375 -0.0625,-1.953125 -0.5,-2.859375 -0.484375,-1 -1.34375,-1.265625 -1.9375,-1.265625 -0.6875,0 -1.53125,0.34375 -1.984375,1.34375 -0.328125,0.75 -0.453125,1.5 -0.453125,2.78125 0,1.15625 0.09375,2.03125 0.515625,2.890625 0.46875,0.90625 1.296875,1.1875 1.921875,1.1875 1.03125,0 1.625,-0.625 1.984375,-1.3125 0.421875,-0.890625 0.453125,-2.0625 0.453125,-2.765625 z m -2.4375,3.84375 c -0.390625,0 -1.171875,-0.21875 -1.390625,-1.515625 -0.125,-0.71875 -0.125,-1.625 -0.125,-2.46875 0,-0.984375 0,-1.859375 0.1875,-2.5625 0.203125,-0.8125 0.8125,-1.171875 1.328125,-1.171875 0.453125,0 1.140625,0.265625 1.375,1.296875 0.15625,0.6875 0.15625,1.625 0.15625,2.4375 0,0.796875 0,1.703125 -0.140625,2.4375 -0.21875,1.3125 -0.984375,1.546875 -1.390625,1.546875 z m 0,0 M -64.155501,1.87775 c 0,-0.28125 0,-0.296875 -0.234375,-0.296875 C -64.671126,1.909 -65.280501,2.3465 -66.499251,2.3465 v 0.34375 c 0.265625,0 0.859375,0 1.53125,-0.296875 v 6.21875 c 0,0.4375 -0.04687,0.578125 -1.09375,0.578125 h -0.375 V 9.534 c 0.328125,-0.03125 1.484375,-0.03125 1.875,-0.03125 0.40625,0 1.546875,0 1.875,0.03125 V 9.19025 h -0.375 c -1.046875,0 -1.09375,-0.140625 -1.09375,-0.578125 z m 0,0 m -6.763124,26.325375 H -67.778 v -0.65625 h -2.484375 v -27.375 H -67.778 v -0.65625 h -3.140625 z m 0,0 M -78.2655,12.981999 c 0.171875,0 0.390625,0 0.390625,-0.21875 0,-0.21875 -0.203125,-0.21875 -0.390625,-0.21875 h -7.03125 c -0.171875,0 -0.390625,0 -0.390625,0.21875 0,0.21875 0.203125,0.21875 0.390625,0.21875 z m 0,2.21875 c 0.171875,0 0.390625,0 0.390625,-0.203125 0,-0.234375 -0.203125,-0.234375 -0.390625,-0.234375 h -7.03125 c -0.171875,0 -0.390625,0 -0.390625,0.21875 0,0.21875 0.203125,0.21875 0.390625,0.21875 z m 0,0 m -12.766875,-1.125 c 0.0625,-0.140625 0.0625,-0.171875 0.0625,-0.203125 0,-0.04687 0,-0.0625 -0.0625,-0.203125 l -2.09375,-5.5 c -0.07813,-0.203125 -0.140625,-0.28125 -0.28125,-0.28125 -0.125,0 -0.234375,0.109375 -0.234375,0.25 0,0.03125 0,0.046875 0.0625,0.1875 l 2.109375,5.546875 -2.109375,5.515625 c -0.0625,0.140625 -0.0625,0.15625 -0.0625,0.21875 0,0.125 0.109375,0.234375 0.234375,0.234375 0.15625,0 0.203125,-0.109375 0.25,-0.234375 z m 0,0 m -3.75925,-1.046875 c 0,-0.984375 -0.0625,-1.953125 -0.5,-2.859375 -0.484375,-1 -1.34375,-1.265625 -1.9375,-1.265625 -0.6875,0 -1.53125,0.34375 -1.984375,1.34375 -0.328125,0.75 -0.453125,1.5 -0.453125,2.78125 0,1.15625 0.09375,2.03125 0.515625,2.890625 0.46875,0.90625 1.296875,1.1875 1.921875,1.1875 1.03125,0 1.625,-0.625 1.984375,-1.3125 0.421875,-0.890625 0.453125,-2.0625 0.453125,-2.765625 z m -2.4375,3.84375 c -0.390625,0 -1.171875,-0.21875 -1.390625,-1.515625 -0.125,-0.71875 -0.125,-1.625 -0.125,-2.46875 0,-0.984375 0,-1.859375 0.1875,-2.5625 0.203125,-0.8125 0.8125,-1.171875 1.328125,-1.171875 0.453125,0 1.140625,0.265625 1.375,1.296875 0.15625,0.6875 0.15625,1.625 0.15625,2.4375 0,0.796875 0,1.703125 -0.140625,2.4375 -0.21875,1.3125 -0.984375,1.546875 -1.390625,1.546875 z m 0,0 m -4.336625,-8.546875 c 0,-0.21875 0,-0.4375 -0.25,-0.4375 -0.23437,0 -0.23437,0.21875 -0.23437,0.4375 v 11.09375 c 0,0.203125 0,0.421875 0.23437,0.421875 0.25,0 0.25,-0.21875 0.25,-0.421875 z m 0,0"
          />
        </g>
      </g>
    </svg>
  </div>
</template>

<style lang="sass">
.canvas
  width: 100%
  height: 100%
  svg
    width: 100%
    height: 100%
path
  stroke: black
  stroke-width: 0.5
</style>
